{"version":3,"file":"fat_cat.js","sources":["../app/components/canvas/canvas.js","../app/components/rectangle/rectangle.js","../app/modules/game/game.js","../app.js"],"sourcesContent":["/**\n * Canvas component\n */\nclass Canvas {\n\tconstructor(props) {\n\t\tthis.id = props.id;\n\t\tthis.className = 'my_canvas';\n\t\tthis.canvas = null;\n\t\tthis.init(props);\n\t\tthis.create(props);\n\t\tthis.attachListeners();\n\t}\n\n\tinit(props) {\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.id = props.id;\n\t\tdocument.getElementById('app').appendChild(canvas);\n\t}\n\n\tcreate(props) {\n\t\tthis.canvas = new fabric.Canvas(props.id, {\n\t\t\tcontainerClass: this.className,\n\t\t});\n\t\tthis.canvas.setHeight(props.height + 1);\n\t\tthis.canvas.setWidth(props.width + 1);\n\t}\n\n\tdestroy() {\n\t\tconst el = document.getElementsByClassName(this.className);\n\t\tif (el) {\n\t\t\tel[0].remove();\n\t\t}\n\n\t\tif (this.canvas) {\n\t\t\tthis.canvas.dispose();\n\t\t}\n\t}\n\n\tattachListeners() {}\n\n\tadd(obj) {\n\t\tthis.canvas.add(obj);\n\t}\n}\n\nexport default Canvas;\n","/**\n * Rectangle component\n */\nclass Rectangle {\n\tconstructor(props) {\n\t\t// todo: some of this props need to be private\n\t\t// switch to revealing module pattern and make it local\n\t\tthis.rect = null;\n\t\tthis.dimension = props.dimension || 50;\n\t\tthis.column = props.column;\n\t\tthis.row = props.row;\n\t\tthis.clicked = props.clicked;\n\t\tthis.mouseOver = props.mouseOver;\n\t\tthis.mouseOut = props.mouseOut;\n\t\tthis.isPermanent = false;\n\t\tthis.isTemporary = true;\n\t\tthis.create(props);\n\t\tthis.attachSelectedListener();\n\t}\n\n\tcreate(props) {\n\t\tconst left = this.column * this.dimension;\n\t\tconst top = this.row * this.dimension;\n\t\tthis.rect = new fabric.Rect({\n\t\t\tid: `${this.column}_${this.row}`,\n\t\t\tleft,\n\t\t\ttop,\n\t\t\tfill: Rectangle.COLORS.REGULAR,\n\t\t\twidth: this.dimension,\n\t\t\theight: this.dimension,\n\t\t\tstroke: Rectangle.COLORS.BORDER,\n\t\t\tstrokeWidth: props.strokeWidth || 1,\n\t\t\tlockMovementX: true,\n\t\t\tlockMovementY: true,\n\t\t\tselection: false,\n\t\t\thasBorders: false,\n\t\t\thasControls: false,\n\t\t\thoverCursor: 'default',\n\t\t});\n\t}\n\n\tget() {\n\t\treturn this.rect;\n\t}\n\n\tattachSelectedListener() {\n\t\tthis.rect.on('selected', () => this.clicked(this));\n\t}\n\n\tdeattachSelectedListener() {\n\t\t// this.rect.off('selected', () => this.clicked(this));\n\t\tthis.rect.__eventListeners.selected = [];\n\t}\n\n\tattachMouseOverListener() {\n\t\tthis.rect.on('mouseover', () => this.mouseOver(this));\n\t}\n\n\tdeatachMouseOverListener() {\n\t\t// todo: not working need to check why\n\t\t// this.rect.off('mouseover', () => this.mouseOver(this));\n\t\tthis.rect.__eventListeners.mouseover = [];\n\t}\n\n\tattachMouseOutListener() {\n\t\tthis.rect.on('mouseout', () => this.mouseOut(this));\n\t}\n\n\tdeatachMouseOutListener() {\n\t\t// todo: not working need to check why\n\t\t// this.rect.off('mouseout', () => this.mouseOut(this));\n\t\tthis.rect.__eventListeners.mouseout = [];\n\t}\n\n\tsetIsPermanent(isPermanent) {\n\t\tthis.isPermanent = isPermanent;\n\t\tthis.deattachSelectedListener();\n\t\tthis.fillRectangle(Rectangle.COLORS.PERMANENT);\n\t\tthis.deleteImage();\n\t\tthis.setImage();\n\t}\n\n\tsetIsTemporary(isTemporary) {\n\t\tthis.isTemporary = isTemporary;\n\t\tthis.fillRectangle(isTemporary ? Rectangle.COLORS.TEMPORARY : Rectangle.COLORS.REGULAR);\n\t\tif (isTemporary) {\n\t\t\tthis.attachMouseOverListener();\n\t\t\tthis.attachMouseOutListener();\n\t\t\tthis.rect.hoverCursor = 'pointer';\n\t\t} else {\n\t\t\tthis.rect.hoverCursor = 'default';\n\t\t\tthis.deatachMouseOverListener();\n\t\t\tthis.deatachMouseOutListener();\n\t\t}\n\t}\n\n\tfillRectangle(color = Rectangle.COLORS.DEFAULT) {\n\t\tthis.rect.set('fill', color);\n\t}\n\n\tsetImage() {\n\t\tconst width = this.dimension / Rectangle.IMAGE_SCALE_FACTOR;\n\t\tconst left = this.column * this.dimension + ((this.dimension - width) / 2);\n\t\tconst top = this.row * this.dimension + ((this.dimension - width) / 2);\n\t\t(function (context) {\n\t\t\tfabric.loadSVGFromURL(Rectangle.IMAGE_PATH, (objects, options) => {\n\t\t\t\tconst obj = fabric.util.groupSVGElements(objects, options);\n\t\t\t\tobj.left = left;\n\t\t\t\tobj.top = top;\n\t\t\t\tobj.scaleToWidth(width);\n\t\t\t\tobj.scaleToHeight(width);\n\t\t\t\tobj.lockMovementX = true;\n\t\t\t\tobj.lockMovementY = true;\n\t\t\t\tobj.selection = false;\n\t\t\t\tobj.hasBorders = false;\n\t\t\t\tobj.hasControls = false;\n\t\t\t\tobj.hoverCursor = 'default';\n\n\t\t\t\tcontext.get().canvas.add(obj);\n\t\t\t\tcontext.get().canvas.setActiveObject(obj, () => {\n\n\t\t\t\t});\n\t\t\t});\n\t\t}(this));\n\t}\n\n\tdeleteImage() {\n\t\tthis.get().canvas._objects.forEach((element) => {\n\t\t\tif (element.type === 'path') {\n\t\t\t\tthis.get().canvas.remove(element);\n\t\t\t\tthis.get().canvas.renderAll();\n\t\t\t}\n\t\t});\n\t}\n}\n\nRectangle.IMAGE_PATH = '../app/assets/svg/paw.svg';\nRectangle.IMAGE_SCALE_FACTOR = 2.5;\nRectangle.COLORS = {\n\tBORDER: 'gray',\n\tREGULAR: 'white',\n\tPERMANENT: 'rgb(144, 140, 255)',\n\tTEMPORARY: 'rgb(195, 186, 255)',\n\tHOVER: 'rgb(195, 186, 0)',\n};\n\nexport default Rectangle;\n","import Canvas from '../../components/canvas/canvas.js';\nimport Rectangle from '../../components/rectangle/rectangle.js';\n\nclass Game {\n\tconstructor(props) {\n\t\tthis.state = {\n\t\t\thistory: [],\n\t\t\tpermanent: [],\n\t\t\ttemporary: [],\n\t\t};\n\t\tthis.rectangles = null;\n\t\tthis.pattern = props.pattern && Game.CAT_PATTERN[props.pattern] || Game.CAT_PATTERN.PATTERN_2;\n\t\tthis.rectDimension = props.rectDimension || null;\n\t\tthis.rectStrokeWidth = props.rectStrokeWidth || null;\n\t\tthis.width = props && props.width && props.width || 10;\n\t\tthis.height = props && props.height && props.height || 10;\n\n\t\t// init canvas\n\t\tthis.initCanvas(props);\n\t\tthis.initRectangles();\n\t\tthis.createRectangles(props);\n\t\tthis.setScore(0);\n\t}\n\n\texit() {\n\t\tif (this.layout) {\n\t\t\tthis.layout.destroy();\n\t\t}\n\t}\n\n\tinitCanvas(props) {\n\t\tthis.layout = new Canvas({\n\t\t\tid: props.id,\n\t\t\twidth: props.rectDimension * this.width + this.rectStrokeWidth,\n\t\t\theight: props.rectDimension * this.height + this.rectStrokeWidth,\n\t\t});\n\t}\n\n\tinitRectangles() {\n\t\tthis.rectangles = new Array(this.width);\n\t\tfor (let i = 0; i < this.width; i++) {\n\t\t\tthis.rectangles[i] = new Array(this.height);\n\t\t}\n\t\tconsole.log(this.rectangles);\n\t}\n\n\tcreateRectangles(props) {\n\t\tfor (let i = 0; i < this.width; i++) {\n\t\t\tfor (let j = 0; j < this.height; j++) {\n\t\t\t\tconst rect = this.getRectangle({\n\t\t\t\t\t...props,\n\t\t\t\t\tcolumn: i,\n\t\t\t\t\trow: j,\n\t\t\t\t});\n\t\t\t\tthis.rectangles[i][j] = rect;\n\t\t\t\tthis.layout.add(rect.get());\n\t\t\t\t// console.log(this.rectangles[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRectangle(props) {\n\t\treturn new Rectangle({\n\t\t\tcolumn: props.column,\n\t\t\trow: props.row,\n\t\t\tdimension: this.rectDimension,\n\t\t\tstrokeWidth: this.rectStrokeWidth,\n\t\t\tclicked: this.rectangleClickedHandler,\n\t\t\tmouseOver: this.rectangleMouseOverHandler,\n\t\t\tmouseOut: this.rectangleMouseOutHandler,\n\t\t});\n\t}\n\n\trectangleClickedHandler = (rect) => {\n\t\tif (rect.isTemporary) {\n\t\t\tthis.resetTemporaryRectangles();\n\t\t\tthis.setPermanentRectangle(rect);\n\t\t\tthis.setTemporaryRectangles(rect);\n\t\t}\n\t}\n\n\tsetPermanentRectangle = (rect) => {\n\t\tthis.state.permanent.push(rect);\n\t\trect.setIsPermanent(true);\n\t}\n\n\tsetTemporaryRectangles = (rect) => {\n\t\tconst patternKeys = Object.keys(this.pattern);\n\t\tfor (const key in patternKeys) {\n\t\t\tconst patternItem = this.pattern[patternKeys[key]];\n\t\t\tconst temporaryColumn = rect.column - patternItem.column;\n\t\t\tconst temporaryRow = rect.row - patternItem.row;\n\t\t\tif (temporaryColumn >= 0 && temporaryColumn < this.width && temporaryRow >= 0 && temporaryRow < this.height) {\n\t\t\t\tconst tempRectangle = this.rectangles[temporaryColumn][temporaryRow];\n\t\t\t\t// do not make temporary of permanent rectangle\n\t\t\t\tif (!tempRectangle.isPermanent) {\n\t\t\t\t\ttempRectangle.setIsTemporary(true);\n\t\t\t\t\tthis.state.temporary.push(tempRectangle);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// console.log('TEMP ITEM => Column: ' + temporaryColumn + ' | Row: ' + temporaryRow);\n\t\t}\n\t\tthis.checkScore();\n\t}\n\n\tresetTemporaryRectangles = () => {\n\t\tthis.state.temporary = [];\n\t\tthis.rectangles.map((column) => {\n\t\t\tcolumn.map((rectangle) => {\n\t\t\t\tif (!rectangle.isPermanent) {\n\t\t\t\t\trectangle.setIsTemporary(false);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n    rectangleMouseOverHandler = (rect) => {\n    \trect.get().set('fill', Rectangle.COLORS.HOVER);\n    \trect.get().canvas.renderAll();\n    \t// console.log('RECTANGLE MOUSE OVER');\n    }\n\n\trectangleMouseOutHandler = (rect) => {\n\t\trect.get().set('fill', Rectangle.COLORS.TEMPORARY);\n\t\trect.get().canvas.renderAll();\n\t\t// console.log('RECTANGLE MOUSE OUT');\n\t}\n\n\tcheckScore() {\n\t\tif (this.state.temporary.length === 0) {\n\t\t\talert('Mjau mrnjau :(');\n\t\t}\n\t\tif (this.state.permanent.length === this.width * this.height) {\n\t\t\talert('Mjau mrnjau :)');\n\t\t}\n\t\tthis.setScore(this.state.permanent.length);\n\t}\n\n\tsetScore(score) {\n\t\tdocument.getElementById('score').innerHTML = ` SCORE: ${score} / ${this.width * this.height}`;\n\t}\n}\n\nGame.CAT_PATTERN = {\n\tPATTERN_1: {\n\t\tstage_1: { column: 0, row: 2 },\n\t\tstage_2: { column: 1, row: 1 },\n\t\tstage_3: { column: 2, row: 0 },\n\t\tstage_4: { column: 1, row: -1 },\n\t\tstage_5: { column: 0, row: -2 },\n\t\tstage_6: { column: -1, row: -1 },\n\t\tstage_7: { column: -2, row: 0 },\n\t\tstage_8: { column: -1, row: 1 },\n\t},\n\tPATTERN_2: {\n\t\tstage_1: { column: 0, row: 3 },\n\t\tstage_2: { column: 2, row: 2 },\n\t\tstage_3: { column: 3, row: 0 },\n\t\tstage_4: { column: 2, row: -2 },\n\t\tstage_5: { column: 0, row: -3 },\n\t\tstage_6: { column: -2, row: -2 },\n\t\tstage_7: { column: -3, row: 0 },\n\t\tstage_8: { column: -2, row: 2 },\n\t},\n\tPATTERN_3: {\n\t\tstage_1: { column: 0, row: 4 },\n\t\tstage_2: { column: 3, row: 3 },\n\t\tstage_3: { column: 4, row: 0 },\n\t\tstage_4: { column: 3, row: -3 },\n\t\tstage_5: { column: 0, row: -4 },\n\t\tstage_6: { column: -3, row: -3 },\n\t\tstage_7: { column: -4, row: 0 },\n\t\tstage_8: { column: -3, row: 3 },\n\t},\n};\n\nexport default Game;\n","import Game from './app/modules/game/game.js';\n\nconst app = (function () {\n\tconst maxWidth = 50;\n\tconst maxHeight = 50;\n\tconst maxDimension = 100;\n\tlet width = 10;\n\tlet height = 10;\n\tlet rectDimension = 50;\n\tlet pattern = null;\n\tlet game = null;\n\n\treturn {\n\t\tinit() {\n\t\t\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\t\t\tdocument.getElementById('input_columns').setAttribute('max', maxWidth);\n\t\t\t\tdocument.getElementById('input_rows').setAttribute('max', maxHeight);\n\t\t\t\tdocument.getElementById('input_cell_width').setAttribute('max', maxDimension);\n\t\t\t});\n\n\t\t\tdocument.getElementById('input_columns').addEventListener('change', function () {\n\t\t\t\twidth = parseInt(this.value, 10);\n\t\t\t\twidth = width < 10 ? 10 : width;\n\t\t\t\twidth = width > maxWidth ? maxWidth : width;\n\t\t\t});\n\n\t\t\tdocument.getElementById('input_rows').addEventListener('change', function () {\n\t\t\t\theight = parseInt(this.value, 10);\n\t\t\t\theight = height < 10 ? 10 : height;\n\t\t\t\theight = height > maxHeight ? maxHeight : height;\n\t\t\t});\n\n\t\t\tdocument.getElementById('input_cell_width').addEventListener('change', function () {\n\t\t\t\trectDimension = parseInt(this.value, 10);\n\t\t\t\trectDimension = rectDimension < 20 ? 20 : rectDimension;\n\t\t\t\trectDimension = rectDimension > maxDimension ? maxDimension : rectDimension;\n\t\t\t});\n\n\t\t\tdocument.getElementById('input_pattern').addEventListener('change', function () {\n\t\t\t\tpattern = this.value;\n\t\t\t});\n\n\t\t\tconst that = this;\n\t\t\tdocument.getElementById('play_game').addEventListener('click', () => {\n\t\t\t\tthat.play({\n\t\t\t\t\twidth,\n\t\t\t\t\theight,\n\t\t\t\t\trectDimension,\n\t\t\t\t\tpattern,\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\n\t\tplay(props) {\n\t\t\tif (game) {\n\t\t\t\tgame.exit();\n\t\t\t}\n\t\t\tgame = new Game({\n\t\t\t\tid: 'fat_cat',\n\t\t\t\trectStrokeWidth: 1,\n\t\t\t\trectDimension: props && props.rectDimension || rectDimension,\n\t\t\t\twidth: props && props.width || width,\n\t\t\t\theight: props && props.height || height,\n\t\t\t\tpattern: props && props.pattern,\n\t\t\t});\n\t\t},\n\t};\n}());\n\napp.init().play();\n"],"names":["Canvas","props","id","className","canvas","init","create","attachListeners","document","createElement","getElementById","appendChild","fabric","containerClass","setHeight","height","setWidth","width","el","getElementsByClassName","remove","dispose","obj","add","Rectangle","rect","dimension","column","row","clicked","mouseOver","mouseOut","isPermanent","isTemporary","attachSelectedListener","left","top","Rect","fill","COLORS","REGULAR","stroke","BORDER","strokeWidth","lockMovementX","lockMovementY","selection","hasBorders","hasControls","hoverCursor","on","__eventListeners","selected","mouseover","mouseout","deattachSelectedListener","fillRectangle","PERMANENT","deleteImage","setImage","TEMPORARY","attachMouseOverListener","attachMouseOutListener","deatachMouseOverListener","deatachMouseOutListener","color","DEFAULT","set","IMAGE_SCALE_FACTOR","context","loadSVGFromURL","IMAGE_PATH","objects","options","util","groupSVGElements","scaleToWidth","scaleToHeight","get","setActiveObject","_objects","forEach","element","type","renderAll","HOVER","Game","resetTemporaryRectangles","setPermanentRectangle","setTemporaryRectangles","state","permanent","push","setIsPermanent","patternKeys","Object","keys","pattern","key","patternItem","temporaryColumn","temporaryRow","tempRectangle","rectangles","setIsTemporary","temporary","checkScore","map","rectangle","history","CAT_PATTERN","PATTERN_2","rectDimension","rectStrokeWidth","initCanvas","initRectangles","createRectangles","setScore","layout","destroy","Array","i","console","log","j","getRectangle","rectangleClickedHandler","rectangleMouseOverHandler","rectangleMouseOutHandler","length","alert","score","innerHTML","PATTERN_1","stage_1","stage_2","stage_3","stage_4","stage_5","stage_6","stage_7","stage_8","PATTERN_3","app","maxWidth","maxHeight","maxDimension","game","addEventListener","setAttribute","parseInt","value","that","play","exit"],"mappings":"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"}