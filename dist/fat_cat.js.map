{"version":3,"file":"fat_cat.js","sources":["../app/components/canvas/canvas.js","../app/components/rectangle/rectangle.js","../app/modules/game/game.js","../app.js"],"sourcesContent":["/**\r\n * Canvas component\r\n */\r\nclass Canvas {\r\n\tconstructor(props) {\r\n\t\tthis.id = props.id;\r\n\t\tthis.className = 'my_canvas';\r\n\t\tthis.canvas = null;\r\n\t\tthis.init(props);\r\n\t\tthis.create(props);\r\n\t\tthis.attachListeners();\r\n\t}\r\n\r\n\tinit(props) {\r\n\t\tconst canvas = document.createElement('canvas');\r\n\t\tcanvas.id = props.id;\r\n\t\tdocument.getElementById('app').appendChild(canvas);\r\n\t}\r\n\r\n\tcreate(props) {\r\n\t\tthis.canvas = new fabric.Canvas(props.id, {\r\n\t\t\tcontainerClass: this.className\r\n\t\t});\r\n\t\tif (props.dimension) {\r\n\t\t\tthis.canvas.setHeight(props.dimension + 1);\r\n\t\t\tthis.canvas.setWidth(props.dimension + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tconst el = document.getElementsByClassName(this.className);\r\n\t\tif (el) {\r\n\t\t\tel[0].remove();\r\n\t\t}\r\n\r\n\t\tif (this.canvas) {\r\n\t\t\tthis.canvas.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tattachListeners() {}\r\n\r\n\tadd(obj) {\r\n\t\tthis.canvas.add(obj);\r\n\t}\r\n}\r\n\r\nexport default Canvas;\r\n","/**\r\n * Rectangle component\r\n */\r\nclass Rectangle {\r\n\tconstructor(props) {\r\n\t\t// todo: some of this props need to be private\r\n\t\t// switch to revealing module pattern and make it local\r\n\t\tthis.rect = null;\r\n\t\tthis.dimension = props.dimension || 50;\r\n\t\tthis.column = props.column;\r\n\t\tthis.row = props.row;\r\n\t\tthis.clicked = props.clicked;\r\n\t\tthis.mouseOver = props.mouseOver;\r\n\t\tthis.mouseOut = props.mouseOut;\r\n\t\tthis.isPermanent = false;\r\n\t\tthis.isTemporary = true;\r\n\t\tthis.create(props);\r\n\t\tthis.attachSelectedListener();\r\n\t}\r\n\r\n\tcreate(props) {\r\n\t\tconst left = (this.column % this.dimension) * this.dimension;\r\n\t\tconst top = this.row * this.dimension;\r\n\t\tthis.rect = new fabric.Rect({\r\n\t\t\tid: `${this.column}_${this.row}`,\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\tfill: Rectangle.COLORS.REGULAR,\r\n\t\t\twidth: this.dimension,\r\n\t\t\theight: this.dimension,\r\n\t\t\tstroke: Rectangle.COLORS.BORDER,\r\n\t\t\tstrokeWidth: props.strokeWidth || 1,\r\n\t\t\tlockMovementX: true,\r\n\t\t\tlockMovementY: true,\r\n\t\t\tselection: false,\r\n\t\t\thasBorders: false,\r\n\t\t\thasControls: false,\r\n\t\t\thoverCursor: 'default',\r\n\t\t});\r\n\t}\r\n\r\n\tget() {\r\n\t\treturn this.rect;\r\n\t}\r\n\r\n\tattachSelectedListener() {\r\n\t\tthis.rect.on('selected', () => this.clicked(this));\r\n\t}\r\n\r\n\tdeattachSelectedListener() {\r\n\t\t// this.rect.off('selected', () => this.clicked(this));\r\n\t\tthis.rect.__eventListeners.selected = [];\r\n\t}\r\n\r\n\tattachMouseOverListener() {\r\n\t\tthis.rect.on('mouseover', () => this.mouseOver(this));\r\n\t}\r\n\r\n\tdeatachMouseOverListener() {\r\n\t\t// todo: not working need to check why\r\n\t\t// this.rect.off('mouseover', () => this.mouseOver(this));\r\n\t\tthis.rect.__eventListeners.mouseover = [];\r\n\t}\r\n\r\n\tattachMouseOutListener() {\r\n\t\tthis.rect.on('mouseout', () => this.mouseOut(this));\r\n\t}\r\n\r\n\tdeatachMouseOutListener() {\r\n\t\t// todo: not working need to check why\r\n\t\t// this.rect.off('mouseout', () => this.mouseOut(this));\r\n\t\tthis.rect.__eventListeners.mouseout = [];\r\n\t}\r\n\r\n\tsetIsPermanent(isPermanent) {\r\n\t\tthis.isPermanent = isPermanent;\r\n\t\tthis.deattachSelectedListener();\r\n\t\tthis.fillRectangle(Rectangle.COLORS.PERMANENT);\r\n\t\tthis.deleteImage();\r\n\t\tthis.setImage();\r\n\t}\r\n\r\n\tsetIsTemporary(isTemporary) {\r\n\t\tthis.isTemporary = isTemporary;\r\n\t\tthis.fillRectangle(isTemporary ? Rectangle.COLORS.TEMPORARY : Rectangle.COLORS.REGULAR);\r\n\t\tif (isTemporary) {\r\n\t\t\tthis.attachMouseOverListener();\r\n\t\t\tthis.attachMouseOutListener();\r\n\t\t\tthis.rect.hoverCursor = 'pointer';\r\n\t\t} else {\r\n\t\t\tthis.rect.hoverCursor = 'default';\r\n\t\t\tthis.deatachMouseOverListener();\r\n\t\t\tthis.deatachMouseOutListener();\r\n\t\t}\r\n\t}\r\n\r\n\tfillRectangle(color = Rectangle.COLORS.DEFAULT) {\r\n\t\tthis.rect.set('fill', color);\r\n\t}\r\n\r\n\tsetImage() {\r\n\t\tconst width = this.dimension / Rectangle.IMAGE_SCALE_FACTOR;\r\n\t\tconst left = this.column * this.dimension + ((this.dimension - width) / 2);\r\n\t\tconst top = this.row * this.dimension + ((this.dimension - width) / 2);\r\n\t\t(function (context) {\r\n\t\t\tfabric.loadSVGFromURL(Rectangle.IMAGE_PATH, (objects, options) => {\r\n\t\t\t\tconst obj = fabric.util.groupSVGElements(objects, options);\r\n\t\t\t\tobj.left = left;\r\n\t\t\t\tobj.top = top;\r\n\t\t\t\tobj.scaleToWidth(width);\r\n\t\t\t\tobj.scaleToHeight(width);\r\n\t\t\t\tobj.lockMovementX = true;\r\n\t\t\t\tobj.lockMovementY = true;\r\n\t\t\t\tobj.selection = false;\r\n\t\t\t\tobj.hasBorders = false;\r\n\t\t\t\tobj.hasControls = false;\r\n\t\t\t\tobj.hoverCursor = 'default';\r\n\r\n\t\t\t\tcontext.get().canvas.add(obj);\r\n\t\t\t\tcontext.get().canvas.setActiveObject(obj, () => {\r\n\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}(this));\r\n\t}\r\n\r\n\tdeleteImage() {\r\n\t\tthis.get().canvas._objects.forEach((element) => {\r\n\t\t\tif (element.type === 'path') {\r\n\t\t\t\tthis.get().canvas.remove(element);\r\n\t\t\t\tthis.get().canvas.renderAll();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nRectangle.IMAGE_PATH = '../app/assets/svg/paw.svg';\r\nRectangle.IMAGE_SCALE_FACTOR = 2.5;\r\nRectangle.COLORS = {\r\n\tBORDER: 'gray',\r\n\tREGULAR: 'white',\r\n\tPERMANENT: 'rgb(144, 140, 255)',\r\n\tTEMPORARY: 'rgb(195, 186, 255)',\r\n\tHOVER: 'rgb(195, 186, 0)',\r\n};\r\n\r\nexport default Rectangle;\r\n","import Canvas from '../../components/canvas/canvas.js';\r\nimport Rectangle from '../../components/rectangle/rectangle.js';\r\n\r\nclass Game {\r\n\tconstructor(props) {\r\n\t\tthis.state = {\r\n\t\t\thistory: [],\r\n\t\t\tpermanent: [],\r\n\t\t\ttemporary: [],\r\n\t\t};\r\n\t\tthis.rectangles = null;\r\n\t\tthis.rectDimension = props.rectDimension || null;\r\n\t\tthis.rectStrokeWidth = props.rectStrokeWidth || null;\r\n\t\tthis.width = props && props.width && props.width || 10;\r\n\t\tthis.height = props && props.height && props.height || 10;\r\n\r\n\t\t// init canvas\r\n\t\tthis.initCanvas(props);\r\n\t\tthis.initRectangles();\r\n\t\tthis.createRectangles(props);\r\n\t}\r\n\r\n\texit() {\r\n\t\tif (this.layout) {\r\n\t\t\tthis.layout.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\tinitCanvas(props) {\r\n\t\tthis.layout = new Canvas({\r\n\t\t\tid: props.id,\r\n\t\t\tdimension: props.rectDimension * this.width + this.rectStrokeWidth,\r\n\t\t});\r\n\t}\r\n\r\n\tinitRectangles() {\r\n\t\tthis.rectangles = new Array(this.width);\r\n\t\tfor (let i = 0; i < this.width; i++) {\r\n\t\t\tthis.rectangles[i] = new Array(this.height);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateRectangles(props) {\r\n\t\tfor (let i = 0; i < this.width; i++) {\r\n\t\t\tfor (let j = 0; j < this.height; j++) {\r\n\t\t\t\tconst rect = this.getRectangle({\r\n\t\t\t\t\t...props,\r\n\t\t\t\t\tcolumn: i,\r\n\t\t\t\t\trow: j,\r\n\t\t\t\t});\r\n\t\t\t\tthis.rectangles[i][j] = rect;\r\n\t\t\t\tthis.layout.add(rect.get());\r\n\t\t\t\t// console.log(this.rectangles[i][j]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetRectangle(props) {\r\n\t\treturn new Rectangle({\r\n\t\t\tcolumn: props.column,\r\n\t\t\trow: props.row,\r\n\t\t\tdimension: this.rectDimension,\r\n\t\t\tstrokeWidth: this.rectStrokeWidth,\r\n\t\t\tclicked: this.rectangleClickedHandler,\r\n\t\t\tmouseOver: this.rectangleMouseOverHandler,\r\n\t\t\tmouseOut: this.rectangleMouseOutHandler,\r\n\t\t});\r\n\t}\r\n\r\n\trectangleClickedHandler = (rect) => {\r\n\t\tif (rect.isTemporary) {\r\n\t\t\tthis.resetTemporaryRectangles();\r\n\t\t\tthis.setPermanentRectangle(rect);\r\n\t\t\tthis.setTemporaryRectangles(rect);\r\n\t\t}\r\n\t}\r\n\r\n\tsetPermanentRectangle = (rect) => {\r\n\t\tthis.state.permanent.push(rect);\r\n\t\trect.setIsPermanent(true);\r\n\t}\r\n\r\n\tsetTemporaryRectangles = (rect) => {\r\n\t\tconst patternKeys = Object.keys(Game.CAT_PATTERN);\r\n\t\tfor (const key in patternKeys) {\r\n\t\t\tconst patternItem = Game.CAT_PATTERN[patternKeys[key]];\r\n\t\t\tconst temporaryColumn = rect.column - patternItem.column;\r\n\t\t\tconst temporaryRow = rect.row - patternItem.row;\r\n\t\t\tif (temporaryColumn >= 0 && temporaryColumn < this.width && temporaryRow >= 0 && temporaryRow < this.height) {\r\n\t\t\t\tconst tempRectangle = this.rectangles[temporaryColumn][temporaryRow];\r\n\t\t\t\t// do not make temporary of permanent rectangle\r\n\t\t\t\tif (!tempRectangle.isPermanent) {\r\n\t\t\t\t\ttempRectangle.setIsTemporary(true);\r\n\t\t\t\t\tthis.state.temporary.push(tempRectangle);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// console.log('TEMP ITEM => Column: ' + temporaryColumn + ' | Row: ' + temporaryRow);\r\n\t\t}\r\n\t\tthis.checkScore();\r\n\t}\r\n\r\n\tresetTemporaryRectangles = () => {\r\n\t\tthis.state.temporary = [];\r\n\t\tthis.rectangles.map((column) => {\r\n\t\t\tcolumn.map((rectangle) => {\r\n\t\t\t\tif (!rectangle.isPermanent) {\r\n\t\t\t\t\trectangle.setIsTemporary(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n    rectangleMouseOverHandler = (rect) => {\r\n\t\trect.get().set('fill', Rectangle.COLORS.HOVER);\r\n\t\trect.get().canvas.renderAll();\r\n\t\t// console.log('RECTANGLE MOUSE OVER');\r\n\t}\r\n\r\n\trectangleMouseOutHandler = (rect) => {\r\n\t\trect.get().set('fill', Rectangle.COLORS.TEMPORARY);\r\n\t\trect.get().canvas.renderAll();\r\n\t\t// console.log('RECTANGLE MOUSE OUT');\r\n\t}\r\n\r\n\tcheckScore() {\r\n\t\tif (this.state.temporary.length === 0) {\r\n\t\t\talert('Mjau mrnjau :(');\r\n\t\t}\r\n\t\tif (this.state.permanent === this.width * this.height) {\r\n\t\t\talert('Mjau mrnjau :)');\r\n\t\t}\r\n\t}\r\n}\r\n\r\nGame.CAT_PATTERN = {\r\n\tstage_1: { column: 0, row: 3 },\r\n\tstage_2: { column: 2, row: 2 },\r\n\tstage_3: { column: 3, row: 0 },\r\n\tstage_4: { column: 2, row: -2 },\r\n\tstage_5: { column: 0, row: -3 },\r\n\tstage_6: { column: -2, row: -2 },\r\n\tstage_7: { column: -3, row: 0 },\r\n\tstage_8: { column: -2, row: 2 },\r\n};\r\n\r\nexport default Game;\r\n","import Game from './app/modules/game/game.js';\r\n\r\nconst app = (function () {\r\n\tlet width = 10;\r\n\tlet height = 10;\r\n\tlet rectDimension = 50;\r\n\tlet game = null;\r\n\r\n\treturn {\r\n\t\tinit() {\r\n\t\t\tdocument.getElementById('input_columns').addEventListener('change', function () {\r\n\t\t\t\twidth = parseInt(this.value, 10);\r\n\t\t\t\twidth = width < 10 ? 10 : width;\r\n\t\t\t\twidth = width > 20 ? 20 : width;\r\n\t\t\t});\r\n\r\n\t\t\tdocument.getElementById('input_rows').addEventListener('change', function () {\r\n\t\t\t\theight = parseInt(this.value, 10);\r\n\t\t\t\theight = height < 10 ? 10 : height;\r\n\t\t\t\theight = height > 20 ? 20 : height;\r\n\t\t\t});\r\n\r\n\t\t\tdocument.getElementById('input_cell_width').addEventListener('change', function () {\r\n\t\t\t\trectDimension = parseInt(this.value, 10);\r\n\t\t\t\trectDimension = rectDimension < 20 ? 20 : rectDimension;\r\n\t\t\t\trectDimension = rectDimension > 100 ? 100 : rectDimension;\r\n\t\t\t});\r\n\r\n\t\t\tconst that = this;\r\n\t\t\tdocument.getElementById('play_game').addEventListener('click', () => {\r\n\t\t\t\tthat.play({\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\trectDimension: rectDimension,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tplay(props) {\r\n\t\t\tif (game) {\r\n\t\t\t\tgame.exit();\r\n\t\t\t}\r\n\t\t\tgame = new Game({\r\n\t\t\t\tid: 'fat_cat',\r\n\t\t\t\trectStrokeWidth: 1,\r\n\t\t\t\trectDimension: props && props.rectDimension || rectDimension,\r\n\t\t\t\twidth: props && props.width || width,\r\n\t\t\t\theight: props && props.height || height,\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n}());\r\n\r\napp.init().play();\r\n"],"names":["Canvas","props","id","className","canvas","init","create","attachListeners","document","createElement","getElementById","appendChild","fabric","containerClass","dimension","setHeight","setWidth","el","getElementsByClassName","remove","dispose","obj","add","Rectangle","rect","column","row","clicked","mouseOver","mouseOut","isPermanent","isTemporary","attachSelectedListener","left","top","Rect","fill","COLORS","REGULAR","width","height","stroke","BORDER","strokeWidth","lockMovementX","lockMovementY","selection","hasBorders","hasControls","hoverCursor","on","__eventListeners","selected","mouseover","mouseout","deattachSelectedListener","fillRectangle","PERMANENT","deleteImage","setImage","TEMPORARY","attachMouseOverListener","attachMouseOutListener","deatachMouseOverListener","deatachMouseOutListener","color","DEFAULT","set","IMAGE_SCALE_FACTOR","context","loadSVGFromURL","IMAGE_PATH","objects","options","util","groupSVGElements","scaleToWidth","scaleToHeight","get","setActiveObject","_objects","forEach","element","type","renderAll","HOVER","Game","resetTemporaryRectangles","setPermanentRectangle","setTemporaryRectangles","state","permanent","push","setIsPermanent","patternKeys","Object","keys","CAT_PATTERN","key","patternItem","temporaryColumn","temporaryRow","tempRectangle","rectangles","setIsTemporary","temporary","checkScore","map","rectangle","history","rectDimension","rectStrokeWidth","initCanvas","initRectangles","createRectangles","layout","destroy","Array","i","j","getRectangle","rectangleClickedHandler","rectangleMouseOverHandler","rectangleMouseOutHandler","length","alert","stage_1","stage_2","stage_3","stage_4","stage_5","stage_6","stage_7","stage_8","app","game","addEventListener","parseInt","value","that","play","exit"],"mappings":"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"}